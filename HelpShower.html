<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Bible App Tutorial</title>
    <link rel="stylesheet" href="./index_files/cleanstyle.css">
    <style>
        .help-bubble {
            position: absolute;
            background: rgba(0, 0, 0, 0.7);
            background-clip: padding-box;
            color: #fff;
            padding: 10px;
            border-radius: 10px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            z-index: 1000;
            display: none;
            max-width: 300px;
        }

        .glow {
            box-shadow: 0 0 10px 2px rgba(255, 255, 0, 0.7);
        }
    </style>
</head>

<body>
    <div id="screen1" class="screen" style="display: flex;">
        <div class="common-header">
            <button id="searchBtn">Search</button>
            <button id="historyBtn">History</button>
            <button id="bookmarksBtn">Bookmarks</button>
        </div>
        <div id="OPverseList" class="verse-list">
            <span class="SearchResult" data--book="GENESIS" data--chap="1" data--verse="0" style="touch-action: pan-y; user-select: none;">
                <span class="VerseNum">GENESIS 1:1</span> In the beginning God created the heaven and the earth.
            </span>
            <span class="SearchResult" data--book="JOHN" data--chap="3" data--verse="15" style="touch-action: pan-y; user-select: none;">
                <span class="VerseNum">JOHN 3:16</span> Â¶ For God so loved the world, that he gave his only begotten Son,
            that whosoever believeth in him should not perish, but have everlasting life.
            </span>
            <!-- Additional verses here -->
        </div>
        <div class="common-footer">
            <span id="addVerseBtn" class="floating-btn verse-nav-button">+</span>
        </div>
        <div id="helpBubble1" class="help-bubble">Tap here to quickly search for any verse in the Bible. The search
            results will appear as you type.</div>
        <div id="helpBubble2" class="help-bubble">This button shows your history of viewed verses. Easily revisit any
            verse you've read recently.</div>
        <div id="helpBubble3" class="help-bubble">Access your bookmarked verses by tapping here. Organize and manage
            your favorite passages.</div>
        <div id="helpBubble4" class="help-bubble">This is the list of verses. Tap on a verse to read the full text. Long
            press to bookmark it. Swipe right to remove from the list, swipe left to add to the reading screen.</div>
        <div id="helpBubble5" class="help-bubble">Tap this button to add a new verse to your list. Keep track of
            passages you're interested in.</div>
        <div id="helpBubbleEnd" class="help-bubble" style="max-width: 400px;">This ends the tutorial. Click here to
            start using the app.</div>
    </div>


    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const helpBubbles = [
                { id: "helpBubble1", element: "#searchBtn", position: "bottom" },
                { id: "helpBubble2", element: "#historyBtn", position: "bottom" },
                { id: "helpBubble3", element: "#bookmarksBtn", position: "bottom" },
                { id: "helpBubble4", element: "#OPverseList", position: "top" },
                { id: "helpBubble5", element: "#addVerseBtn", position: "top" }
            ];

            let currentBubbleIndex = 0;

            function showNextBubble() {
                document.getElementById("helpBubbleEnd").style.display = "none";
                if (currentBubbleIndex > 0) {
                    const prevElement = document.querySelector(helpBubbles[currentBubbleIndex - 1].element);
                    document.getElementById(helpBubbles[currentBubbleIndex - 1].id).style.display = "none";
                    prevElement.classList.remove("glow");
                }

                if (currentBubbleIndex < helpBubbles.length) {
                    const bubble = helpBubbles[currentBubbleIndex];
                    const element = document.querySelector(bubble.element);
                    const rect = element.getBoundingClientRect();
                    const helpBubble = document.getElementById(bubble.id);

                    element.classList.add("glow");

                    helpBubble.style.display = "block";

                    if (bubble.position === "bottom") {
                        helpBubble.style.top = (rect.top + window.scrollY + rect.height + 10) + "px";
                        helpBubble.style.left = (rect.left + window.scrollX) + "px";
                    } else {
                        helpBubble.style.top = (rect.top + window.scrollY - helpBubble.offsetHeight - 10) + "px";
                        helpBubble.style.left = (rect.left + window.scrollX) + "px";
                    }

                    // Ensure bubble is on screen
                    const bubbleRect = helpBubble.getBoundingClientRect();
                    if (bubbleRect.right > window.innerWidth-20) {
                        helpBubble.style.left = (window.innerWidth - 310) + "px";
                    }
                    if (bubbleRect.left < 0) {
                        helpBubble.style.left = "10px";
                    }
                    if (bubbleRect.top < 0) {
                        helpBubble.style.top = (rect.top + window.scrollY + rect.height + 10) + "px";
                    }
                    if (bubbleRect.bottom > window.innerHeight) {
                        helpBubble.style.top = (rect.top + window.scrollY - helpBubble.offsetHeight - 10) + "px";
                    }

                    currentBubbleIndex++;
                } else {
                    // Show the end tutorial bubble in the center of the screen
                    const endBubble = document.getElementById("helpBubbleEnd");
                    endBubble.style.display = "block";
                    endBubble.style.top = "50%";
                    endBubble.style.left = "50%";
                    endBubble.style.transform = "translate(-50%, -50%)";
                    endBubble.onclick = function() {
                        endBubble.style.display = "none";
                        loadVerseListScreen();
                    };
                    currentBubbleIndex = 0;
                }
            }

            document.addEventListener("click", showNextBubble);
            showNextBubble();
        });
    </script>
</body>

</html>